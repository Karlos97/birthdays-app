(this["webpackJsonpfarma-prom-book-app"]=this["webpackJsonpfarma-prom-book-app"]||[]).push([[0],{17:function(t,o,e){t.exports={"app-header":"Header_app-header__3VeaE","app-header-block":"Header_app-header-block__W_cZ8","app-header-block-logo":"Header_app-header-block-logo__3Madj","app-header-block-logo-name":"Header_app-header-block-logo-name__2zhDz"}},24:function(t,o,e){t.exports={link:"GoBackToBooksListButton_link__2vsCq",active:"GoBackToBooksListButton_active__2y7-Z",arrow:"GoBackToBooksListButton_arrow__CskHR"}},25:function(t,o,e){t.exports={app:"Layout_app__3iHya","book-list":"Layout_book-list__3Bqd2","book-details":"Layout_book-details__2RAy2"}},26:function(t,o,e){t.exports={notification:"Notification_notification__2QtJv",error:"Notification_error__zWtTG",success:"Notification_success__2PruW"}},4:function(t,o,e){t.exports={book:"Book_book__1Pflz","book-download":"Book_book-download__2X1no","book-top":"Book_book-top__O0kbT","book-top-title":"Book_book-top-title__29JQ0","book-top-title-details":"Book_book-top-title-details__SYAk-","book-top-subtitle":"Book_book-top-subtitle__32bsm","book-image":"Book_book-image__spobu","book-authors":"Book_book-authors__3BmpD","book-description":"Book_book-description__3mBbE"}},43:function(t,o,e){t.exports={"books-list":"BooksList_books-list__1M3OU"}},47:function(t,o,e){t.exports={nav:"MainNavigation_nav__Z1aQ-"}},57:function(t,o,e){},86:function(t,o,e){"use strict";e.r(o);var a,n=e(0),c=e(20),i=e.n(c),s=e(5),l=e(16),r=e(42),b=e(27),u=e(11),d="ADD_BOOKS_TO_BOOK_LIST",j="SET_LOADING_BOOKS_LIST_DATA_STATUS",p="SET_LOADING_BOOK_DETAILS_DATA_STATUS",h="INCREMENT_START_INDEX",k="SET_NOTIFICATION",O={startIndex:0,booksPerFetch:15,loadingBooksListData:!0,loadingBookDetailsData:!0},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case j:return Object(u.a)(Object(u.a)({},t),{},{loadingBooksListData:o.payload});case p:return Object(u.a)(Object(u.a)({},t),{},{loadingBookDetailsData:o.payload});case d:var e=t.bookList?[].concat(Object(b.a)(t.bookList),Object(b.a)(o.payload)):o.payload,a=Object(b.a)(new Set(e.map((function(t){return t.id})))).map((function(t){return e.find((function(o){return o.id===t}))}));return Object(u.a)(Object(u.a)({},t),{},{bookList:a});case h:var n=t.startIndex+t.booksPerFetch;return Object(u.a)(Object(u.a)({},t),{},{startIndex:n});default:return t}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return o.type===k?o.payload:t},_=Object(l.b)({booksOptions:m,notification:f}),v=(e(57),e(12)),x=e(3),g=e(30),B=e(43),N=e.n(B),T=e(4),D=e.n(T),I=e(1),y=function(t){var o=t.title,e=t.subtitle,a=t.authors,n=t.publishedDate,c=t.description,i=t.smallThumbnail,s=t.id,l=null===a||void 0===a?void 0:a.reduce((function(t,o){return"".concat(t,", ").concat(o)}));return Object(I.jsxs)("li",{className:D.a.book,children:[Object(I.jsx)("img",{className:D.a["book-image"],alt:"Book",src:i}),Object(I.jsxs)("div",{className:D.a["book-top"],children:[Object(I.jsx)(v.b,{to:"/book/".concat(s),className:D.a["book-top-title"],children:o}),e?Object(I.jsx)("p",{className:D.a["book-top-subtitle"],children:e}):Object(I.jsx)("p",{className:D.a["book-top-subtitle"],children:"See detailed description below."})]}),Object(I.jsx)("h5",{className:D.a["book-authors"],children:"".concat(l," (").concat(n,")")}),Object(I.jsx)("p",{className:D.a["book-description"],children:c})]})},L=e(45),A=e(31),S=e(46),w=e.n(S);var E=function(t){var o=t.loading,e=Object(A.css)(a||(a=Object(L.a)(["\n    display: block;\n    margin: 2rem auto;\n  "])));return Object(I.jsx)(w.a,{loading:o,css:e,size:100})},F=e(22),H=e.n(F),P="https://www.googleapis.com/books/v1/volumes?q=subject:",G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fiction",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e="".concat(P).concat(t,"&startIndex=").concat(o,"&maxResults=").concat(15);return H.a.get(e).then((function(t){var o;return null===(o=t.data)||void 0===o?void 0:o.items.map((function(t){return{title:t.volumeInfo.title,subtitle:t.volumeInfo.subtitle,authors:t.volumeInfo.authors,publishedDate:t.volumeInfo.publishedDate,description:t.volumeInfo.description,smallThumbnail:t.volumeInfo.imageLinks.smallThumbnail,id:t.id}}))}))},R=function(t){return{type:k,payload:t}},z=function(t){return{type:j,payload:t}},C=function(t){return{type:p,payload:t}},K=function(t){return{type:h,payload:t}},M=function(t,o,e){return function(a){a(z(!0)),G(t,o,e).then((function(t){a({type:d,payload:t}),a(R({isActive:!0,status:"success",title:"Book list fetched."})),a(z(!1)),a(K())})).catch((function(){a(R({isActive:!0,status:"error",title:"Problem with fetching book list."})),a(z(!1))}))}},J=function(t){var o=t.booksOptions;return null===o||void 0===o?void 0:o.loadingBookDetailsData},W=function(t){return t.booksOptions.bookList},q=function(t){return t.notification},Q=function(t){return t.booksOptions.startIndex},U=function(){var t=Object(s.b)(),o=Object(s.c)(J),e=Object(s.c)(W);return Object(n.useEffect)((function(){e||t(M())}),[t,e]),Object(I.jsx)(g.Fragment,{children:Object(I.jsxs)("ul",{className:N.a["books-list"],children:[null===e||void 0===e?void 0:e.map((function(t){return Object(I.jsx)(y,{title:t.title,subtitle:t.subtitle,authors:t.authors,publishedDate:t.publishedDate,description:t.description,smallThumbnail:t.smallThumbnail,id:t.id},t.id)})),Object(I.jsx)(E,{loading:o})]})})},Z=e(23),X=e(17),V=e.n(X),Y=e.p+"static/media/logo_pl.5558c896.png",$=function(){return Object(I.jsxs)("header",{className:V.a["app-header"],children:[Object(I.jsx)("h2",{children:"This is recruitment task for Farma Prom company."}),Object(I.jsxs)("div",{className:V.a["app-header-block"],children:[Object(I.jsx)("img",{src:Y,alt:"Leocode logo",className:V.a["app-header-block-logo"]}),Object(I.jsx)("div",{className:V.a["app-header-block-logo-name"],children:"Book App"})]})]})},tt=e(48),ot=e(24),et=e.n(ot),at=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(v.b,{to:"/",activeClassName:et.a.link.active,className:et.a.link,children:[Object(I.jsx)(tt.a,{className:et.a.arrow}),Object(I.jsx)("span",{children:"Books List"})]})})},nt=e(47),ct=e.n(nt),it=function(){return Object(I.jsx)("nav",{className:ct.a.nav,children:Object(I.jsx)(at,{})})},st=e(25),lt=e.n(st),rt=e(26),bt=e.n(rt),ut=function(t){var o=t.status,e=t.title,a=t.message,n=Object(s.b)(),c="";"error"===o&&(c=bt.a.error),"success"===o&&(c=bt.a.success,setTimeout((function(){n(R({isActive:!1}))}),1e3));var i="".concat(bt.a.notification," ").concat(c);return Object(I.jsxs)("section",{className:i,children:[Object(I.jsx)("h2",{children:e}),Object(I.jsx)("p",{children:a})]})},dt=function(t){var o=t.children,e=Object(x.h)().pathname,a=Object(n.useRef)(),c=Object(s.b)(),i=Object(n.useState)(!1),l=Object(Z.a)(i,2),r=l[0],b=l[1],u=Object(s.c)(q),d=u.isActive,j=u.status,p=u.title,h=Object(s.c)(Q),k="/"===e,O=k?lt.a["book-details"]:lt.a["book-list"];return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:lt.a.app,onScroll:function(){var t=a.current,o=t.scrollTop,e=t.scrollHeight,n=t.clientHeight;a.current&&(o+n>=e-n/4&&k&&!r&&(b(!0),c(M("fiction",h)),c(K()),setTimeout((function(){b(!1)}),5e3)))},ref:a,children:[Object(I.jsx)($,{}),d&&Object(I.jsx)(ut,{status:j,title:p}),!k&&Object(I.jsx)(it,{}),Object(I.jsx)("main",{className:O,children:o})]})})},jt=function(t){return H.a.get("https://www.googleapis.com/books/v1/volumes/"+t).then((function(t){return t.data})).then((function(t){var o,e,a=null===(o=t.volumeInfo.authors)||void 0===o?void 0:o.reduce((function(t,o){return"".concat(t,", ").concat(o)}));return{title:t.volumeInfo.title,subtitle:t.volumeInfo.subtitle||null,authors:a,publishedDate:t.volumeInfo.publishedDate,description:t.volumeInfo.description||null,thumbnail:(null===(e=t.volumeInfo.imageLinks)||void 0===e?void 0:e.thumbnail)||null,acsTokenLink:t.accessInfo.epub.acsTokenLink||null,publicDomain:t.accessInfo.publicDomain,id:t.id}}))},pt=function(){var t=Object(s.b)(),o=Object(x.i)(),e=Object(s.c)((function(t){var o=t.booksOptions;return null===o||void 0===o?void 0:o.loadingBookDetailsData})),a=Object(s.c)((function(t){return"error"!==t.notification.status})),c=Object(x.g)();a||c.goBack();var i=Object(n.useState)({title:"",subtitle:"",authors:"",publishedDate:"",description:"",thumbnail:"",acsTokenLink:"",publicDomain:"",id:""}),l=Object(Z.a)(i,2),r=l[0],b=l[1],u=o.bookId,d=r.title,j=r.subtitle,p=r.authors,h=r.publishedDate,k=r.description,O=r.thumbnail,m=r.acsTokenLink,f=r.publicDomain;return Object(n.useEffect)((function(){t(C(!0)),jt(u).then((function(o){b(o),t(R({isActive:!0,status:"success",title:"Book details fetched."})),t(C(!1))})).catch((function(){t(R({isActive:!0,status:"error",title:"Problem with fetching book details."})),t(C(!1))}))}),[t,u]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(E,{loading:e}),!e&&a&&Object(I.jsxs)("div",{className:D.a.book,children:[Object(I.jsx)("img",{className:D.a["book-image"],alt:"Book",src:O}),Object(I.jsxs)("div",{className:D.a["book-top"],children:[Object(I.jsx)("p",{className:D.a["book-top-title-details"],children:d}),Object(I.jsx)("p",{className:D.a["book-top-subtitle"],children:j})]}),Object(I.jsx)("h5",{className:D.a["book-authors"],children:"".concat(p," (").concat(h,")")}),"string"===typeof m&&f&&Object(I.jsx)("a",{href:m,className:D.a["book-download"],children:"DOWNLOAD BOOK"}),Object(I.jsx)("div",{dangerouslySetInnerHTML:{__html:k}})]})]})},ht=function(){return Object(I.jsx)(v.a,{children:Object(I.jsx)(dt,{children:Object(I.jsxs)(x.d,{children:[Object(I.jsx)(x.b,{path:"/FarmaProm-book-app",exact:!0,children:Object(I.jsx)(x.a,{to:"/"})}),Object(I.jsx)(x.b,{path:"/",exact:!0,children:Object(I.jsx)(U,{})}),Object(I.jsx)(x.b,{path:"/book/:bookId",children:Object(I.jsx)(pt,{})})]})})})},kt=Object(l.c)(_,Object(l.a)(r.a));i.a.render(Object(I.jsxs)(s.a,{store:kt,children:[Object(I.jsx)(ht,{}),","]}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.0e22ea2a.chunk.js.map